<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Laravel 数组(Arr)源代码分析 | blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Vuepress blog demo">
    <link rel="preload" href="/blog/assets/css/0.styles.f9b52b88.css" as="style"><link rel="preload" href="/blog/assets/js/app.6d7c03a7.js" as="script"><link rel="preload" href="/blog/assets/js/2.3312aabc.js" as="script"><link rel="preload" href="/blog/assets/js/6.f85c2328.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.fb1f55a2.js"><link rel="prefetch" href="/blog/assets/js/11.22d6c824.js"><link rel="prefetch" href="/blog/assets/js/12.b7ee7249.js"><link rel="prefetch" href="/blog/assets/js/3.f3f6d0a6.js"><link rel="prefetch" href="/blog/assets/js/4.2b7fc900.js"><link rel="prefetch" href="/blog/assets/js/5.2a2d8e1b.js"><link rel="prefetch" href="/blog/assets/js/7.bbd750b6.js"><link rel="prefetch" href="/blog/assets/js/8.a7efad1f.js"><link rel="prefetch" href="/blog/assets/js/9.a2e63b4d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f9b52b88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/blog/migration.html" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/collection.html" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  其它
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  html&amp;css
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  其它
</a></div> <a href="https://github.com/hhpp33/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/blog/migration.html" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/collection.html" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  其它
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  html&amp;css
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  其它
</a></div> <a href="https://github.com/hhpp33/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">首页</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Laravel源代码分析</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/blog/collection.html" class="sidebar-link">Laravel 集合(Collection)源代码分析</a></li><li><a href="/blog/blog/arr.html" aria-current="page" class="active sidebar-link">Laravel 数组(Arr)源代码分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/blog/arr.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/blog/blog/arr.html#常用方法" class="sidebar-link">常用方法</a></li></ul></li><li><a href="/blog/blog/env.html" class="sidebar-link">Laravel 环境变量(Env)加载源代码分析</a></li><li><a href="/blog/blog/request.html" class="sidebar-link">Laravel Request 源代码分析</a></li><li><a href="/blog/blog/response.html" class="sidebar-link">Laravel Response 源代码分析</a></li><li><a href="/blog/blog/eloquent.html" class="sidebar-link">Laravel Eloquent 源代码分析</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="laravel-数组-arr-源代码分析"><a href="#laravel-数组-arr-源代码分析" class="header-anchor">#</a> Laravel 数组(Arr)源代码分析</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p><a href="https://github.com/hhpp33/laravel/blob/master/vendor/laravel/framework/src/Illuminate/Support/Arr.php" target="_blank" rel="noopener noreferrer">Illuminate\Support\Arr<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 类为辅助函数。处理一组数组时，帮助你快捷的解决实际问题。</p> <h2 id="常用方法"><a href="#常用方法" class="header-anchor">#</a> 常用方法</h2> <h3 id="_1、arr-accessible-方法会检查给定的值是否数组或数组接口"><a href="#_1、arr-accessible-方法会检查给定的值是否数组或数组接口" class="header-anchor">#</a> 1、Arr::accessible() 方法会检查给定的值是否数组或数组接口</h3> <h4 id="代码分析"><a href="#代码分析" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
    *验证给定的值是否合法
    *
    * @param  mixed  $value
    * @return bool
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">accessible</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//判断给定的值是否数组或数组接口</span>
       <span class="token keyword">return</span> <span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token variable">$value</span> <span class="token keyword">instanceof</span> <span class="token class-name">ArrayAccess</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$isAccessible</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'a'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'b'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>
    <span class="token variable">$isAccessible</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Collection</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>
    <span class="token variable">$isAccessible</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>
    <span class="token variable">$isAccessible</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>
</code></pre></div><h3 id="_2、arr-add-方法会对数组添加一个元素"><a href="#_2、arr-add-方法会对数组添加一个元素" class="header-anchor">#</a> 2、Arr::add() 方法会对数组添加一个元素</h3> <h4 id="代码分析-2"><a href="#代码分析-2" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
     * 对数组添加一个元素
     * 
     * @param  array   $array
     * @param  string  $key
     * @param  mixed   $value
     * @return array
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//若元素不存在，则添加元素</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
         <span class="token comment">//返回数据</span>
        <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-2"><a href="#案例-2" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>     <span class="token variable">$array</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'price'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// ['name' =&gt; 'Desk', 'price' =&gt; 100]</span>
     <span class="token variable">$array</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token constant">null</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'price'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// ['name' =&gt; 'Desk', 'price' =&gt; 100]</span>
</code></pre></div><h3 id="_3、arr-collapse-将多个数组合并成一个"><a href="#_3、arr-collapse-将多个数组合并成一个" class="header-anchor">#</a> 3、Arr::collapse() 将多个数组合并成一个</h3> <h4 id="代码分析-3"><a href="#代码分析-3" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
    * 将多个数组合并成一个
    *
    * @param  array  $array
    * @return array
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">collapse</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
       <span class="token variable">$results</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
       <span class="token comment">// 遍历数据</span>
       <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$values</span> <span class="token keyword">instanceof</span> <span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 判断是否集合</span>
               <span class="token variable">$values</span> <span class="token operator">=</span> <span class="token variable">$values</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$values</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 判断是否集合，若是非数组跳出循环</span>
               <span class="token keyword">continue</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token comment">//合并数据</span>
           <span class="token variable">$results</span> <span class="token operator">=</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$results</span><span class="token punctuation">,</span> <span class="token variable">$values</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    
       <span class="token keyword">return</span> <span class="token variable">$results</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-3"><a href="#案例-3" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>     <span class="token variable">$array</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</code></pre></div><h3 id="_4、arr-crossjoin-交叉连接给定数组，返回一个包含所有排列组合的笛卡尔乘积"><a href="#_4、arr-crossjoin-交叉连接给定数组，返回一个包含所有排列组合的笛卡尔乘积" class="header-anchor">#</a> 4、Arr::crossJoin() 交叉连接给定数组，返回一个包含所有排列组合的笛卡尔乘积</h3> <h4 id="代码分析-4"><a href="#代码分析-4" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>     <span class="token comment">/**
      * 交叉连接给定数组，返回一个包含所有排列组合的笛卡尔乘积
      *
      * @param  array  ...$arrays
      * @return array
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">crossJoin</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">$arrays</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token comment">//定义一个二维数组</span>
         <span class="token variable">$results</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token comment">//遍历参数，参数是多个数组</span>
         <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$arrays</span> <span class="token keyword">as</span> <span class="token variable">$index</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token variable">$append</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
             <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$results</span> <span class="token keyword">as</span> <span class="token variable">$product</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token comment">//参数数组</span>
                 <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token comment">//每个参数的键和值复制一份给$product</span>
                     <span class="token variable">$product</span><span class="token punctuation">[</span><span class="token variable">$index</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
                     <span class="token comment">//$product添加到$append</span>
                     <span class="token variable">$append</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$product</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
             <span class="token comment">//最后把$append賦值给$results</span>
             <span class="token variable">$results</span> <span class="token operator">=</span> <span class="token variable">$append</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
    
         <span class="token keyword">return</span> <span class="token variable">$results</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-4"><a href="#案例-4" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$matrix</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">crossJoin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'a'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*
        [
            [1, 'a'],
            [1, 'b'],
            [2, 'a'],
            [2, 'b'],
        ]
    */</span>
</code></pre></div><h3 id="_5、arr-divide-返回两个数组，一个包含原数组的所有键，另外一个包含原数组的所有值"><a href="#_5、arr-divide-返回两个数组，一个包含原数组的所有键，另外一个包含原数组的所有值" class="header-anchor">#</a> 5、Arr::divide() 返回两个数组，一个包含原数组的所有键，另外一个包含原数组的所有值</h3> <h4 id="代码分析-5"><a href="#代码分析-5" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
      * 返回两个数组，一个包含原数组的所有键，另外一个包含原数组的所有值
      *
      * @param  array  $array
      * @return array
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">array_keys</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-5"><a href="#案例-5" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token punctuation">[</span><span class="token variable">$keys</span><span class="token punctuation">,</span> <span class="token variable">$values</span><span class="token punctuation">]</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// $keys: ['name']</span>
    <span class="token comment">// $values: ['Desk']</span>
</code></pre></div><h3 id="_6、arr-dot-使用「-」号将将多维数组转化为一维数组"><a href="#_6、arr-dot-使用「-」号将将多维数组转化为一维数组" class="header-anchor">#</a> 6、Arr::dot() 使用「.」号将将多维数组转化为一维数组</h3> <h4 id="代码分析-6"><a href="#代码分析-6" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>     <span class="token comment">/**
      * 使用「.」号将将多维数组转化为一维数组
      *
      * @param  array   $array
      * @param  string  $prepend
      * @return array
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">dot</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$prepend</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token variable">$results</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token comment">//遍历数组</span>
         <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">//判断是否数组并非空值</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token comment">//递归处理将结果合并到$results，$prependq为键前綴</span>
                 <span class="token variable">$results</span> <span class="token operator">=</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$results</span><span class="token punctuation">,</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dot</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$prepend</span><span class="token punctuation">.</span><span class="token variable">$key</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                 <span class="token comment">//非数组直接賦值给$results</span>
                 <span class="token variable">$results</span><span class="token punctuation">[</span><span class="token variable">$prepend</span><span class="token punctuation">.</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
    
         <span class="token keyword">return</span> <span class="token variable">$results</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-6"><a href="#案例-6" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'products'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'desk'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$flattened</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dot</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ['products.desk.price' =&gt; 100]</span>
</code></pre></div><h3 id="_7、arr-except-从数组中移除给定键值对"><a href="#_7、arr-except-从数组中移除给定键值对" class="header-anchor">#</a> 7、Arr::except() 从数组中移除给定键值对</h3> <h4 id="代码分析-7"><a href="#代码分析-7" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
     * 从数组中移除给定键值对
     *
     * @param  array  $array
     * @param  array|string  $keys
     * @return array
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">except</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$keys</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//移除给定键值对，$keys为数组</span>
        <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$keys</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-7"><a href="#案例-7" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$filtered</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ['name' =&gt; 'Desk']</span>
</code></pre></div><h3 id="_8、arr-exists-检查给定键在数组中是否存在"><a href="#_8、arr-exists-检查给定键在数组中是否存在" class="header-anchor">#</a> 8、Arr::exists() 检查给定键在数组中是否存在</h3> <h4 id="代码分析-8"><a href="#代码分析-8" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>     <span class="token comment">/**
      * 检查给定键在数组中是否存在
      *
      * @param  \ArrayAccess|array  $array
      * @param  string|int  $key
      * @return bool
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>    <span class="token comment">//判断是否数组接口</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">instanceof</span> <span class="token class-name">ArrayAccess</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">//调用数组接口类offsetExists方法判断当前key是否存在</span>
             <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">offsetExists</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> <span class="token function">array_key_exists</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-8"><a href="#案例-8" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'John Doe'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$exists</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>
    <span class="token variable">$exists</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'salary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>
</code></pre></div><h3 id="_9、arr-first-返回使用给定闭包对数组进行过滤第一个元素"><a href="#_9、arr-first-返回使用给定闭包对数组进行过滤第一个元素" class="header-anchor">#</a> 9、Arr::first() 返回使用给定闭包对数组进行过滤第一个元素</h3> <h4 id="代码分析-9"><a href="#代码分析-9" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
     * 返回使用给定闭包对数组进行过滤第一个元素
     *
     * @param  array  $array
     * @param  callable|null  $callback
     * @param  mixed  $default
     * @return mixed
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">callable</span> <span class="token variable">$callback</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//判断回调函数是否为null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//若是空值直接返回</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//若是数组直接返回</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//若有回调函数则回调处理</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//返回符合的条件第一元素</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token variable">$callback</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//若以上条件都不满足，则返回给定的默认值</span>
        <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-9"><a href="#案例-9" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$first</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">&gt;=</span> <span class="token number">150</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 200</span>
</code></pre></div><h3 id="_10、arr-last-返回使用给定闭包对数组进行过滤最后一个元素"><a href="#_10、arr-last-返回使用给定闭包对数组进行过滤最后一个元素" class="header-anchor">#</a> 10、Arr::last() 返回使用给定闭包对数组进行过滤最后一个元素</h3> <h4 id="代码分析-10"><a href="#代码分析-10" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
    * 返回使用给定闭包对数组进行过滤最后一个元素
    *
    * @param  array  $array
    * @param  callable|null  $callback
    * @param  mixed  $default
    * @return mixed
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">last</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">callable</span> <span class="token variable">$callback</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
       <span class="token comment">//若无回调函数，则返回当前数组最后一个元素</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token variable">$default</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token comment">//若有回调函数，则返回当前数组符合条件最后一个元素</span>
       <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token function">array_reverse</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">,</span> <span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-10"><a href="#案例-10" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$last</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">&gt;=</span> <span class="token number">150</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 300</span>
</code></pre></div><h3 id="_11、arr-flatten-多维数组转化为一维数组-指定过滤数组的层级"><a href="#_11、arr-flatten-多维数组转化为一维数组-指定过滤数组的层级" class="header-anchor">#</a> 11、Arr::flatten() 多维数组转化为一维数组,指定过滤数组的层级</h3> <h4 id="代码分析-11"><a href="#代码分析-11" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
    * 多维数组转化为一维数组,指定过滤数组的层级
    *
    * @param  array  $array
    * @param  int  $depth
    * @return array
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$depth</span> <span class="token operator">=</span> <span class="token constant">INF</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">//遍历数据</span>
      <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//若有集合，则返回集合元素，否则返回数组</span>
          <span class="token variable">$item</span> <span class="token operator">=</span> <span class="token variable">$item</span> <span class="token keyword">instanceof</span> <span class="token class-name">Collection</span> <span class="token operator">?</span> <span class="token variable">$item</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
    
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//若不是数组，则将$item添加到$result数据</span>
              <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token variable">$depth</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//若指定的过滤数组的层级是1，则获取当前元素的所有值将合并到$result数组</span>
              <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">,</span> <span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">//否则递归处理将结果合并到$result数组</span>
              <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">,</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$depth</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    
      <span class="token keyword">return</span> <span class="token variable">$result</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-11"><a href="#案例-11" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Joe'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'languages'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'PHP'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Ruby'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$flattened</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ['Joe', 'PHP', 'Ruby']</span>
    <span class="token comment">// 300</span>
</code></pre></div><h3 id="_12、arr-forget-使用「-」号从嵌套数组中移除给定键值对"><a href="#_12、arr-forget-使用「-」号从嵌套数组中移除给定键值对" class="header-anchor">#</a> 12、Arr::forget() 使用「.」号从嵌套数组中移除给定键值对</h3> <h4 id="代码分析-12"><a href="#代码分析-12" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
      * 使用「.」号从嵌套数组中移除给定键值对
      *
      * @param  array  $array
      * @param  array|string  $keys
      * @return void
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">forget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$keys</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token variable">$original</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token variable">$array</span><span class="token punctuation">;</span>
         <span class="token comment">//转化成数组</span>
         <span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">)</span> <span class="token variable">$keys</span><span class="token punctuation">;</span>
          <span class="token comment">//若$keys数组为0，则直接返回</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">//遍历数组</span>
         <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$keys</span> <span class="token keyword">as</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">// if the exact key exists in the top-level, remove it</span>
             <span class="token comment">// 跳出本次循环，并删除当前元素</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
                 <span class="token keyword">continue</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
             <span class="token comment">//以“.”符合分割成数组</span>
             <span class="token variable">$parts</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'.'</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
             <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token variable">$original</span><span class="token punctuation">;</span>
    
             <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$parts</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token comment">//删除数组中的第一个元素，并返回被删除元素的值</span>
                 <span class="token variable">$part</span> <span class="token operator">=</span> <span class="token function">array_shift</span><span class="token punctuation">(</span><span class="token variable">$parts</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token comment">//若$array[$part]存在并为数组，则将$array[$part]賦值给$array</span>
                 <span class="token comment">//否则跳出本循环</span>
                 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$part</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$part</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$part</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                     <span class="token keyword">continue</span> <span class="token number">2</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
             <span class="token comment">//删除数组中的第一个元素，并返回被删除元素的值</span>
             <span class="token comment">//删除被删除元素的元素</span>
             <span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token function">array_shift</span><span class="token punctuation">(</span><span class="token variable">$parts</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
</code></pre></div><h4 id="案例-12"><a href="#案例-12" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'products'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'desk'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'products.desk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ['products' =&gt; []]</span>
</code></pre></div><h3 id="_13、arr-get-使用「-」号从嵌套数组中获取值"><a href="#_13、arr-get-使用「-」号从嵌套数组中获取值" class="header-anchor">#</a> 13、Arr::get() 使用「.」号从嵌套数组中获取值</h3> <h4 id="代码分析-13"><a href="#代码分析-13" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
      * 使用「.」号从嵌套数组中获取值
      *
      * @param  \ArrayAccess|array  $array
      * @param  string  $key
      * @param  mixed   $default
      * @return mixed
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token comment">//若当前值不是数组，则返回给定的默认值</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">//若给定的键为null，则返回当前数组</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">//若元素存在 ，则返回当前元素</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">//若给定的键无“.”符号并当前元素存在，则返回当元素，不存在返回默认值</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'.'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
        <span class="token comment">// 以&quot;.&quot;符号分割成为数数组，遍历数据</span>
         <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">explode</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'.'</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$segment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">//若$array是数据，并且当前元素存在，则将当前元素赋值给$array，否则返回默认值</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$segment</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$segment</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                 <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
    
         <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

</code></pre></div><h4 id="案例-13"><a href="#案例-13" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'products'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'desk'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$price</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'products.desk.price'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 100</span>
</code></pre></div><h3 id="_14、arr-has-使用「-」检查给定数据项是否在数组中存在"><a href="#_14、arr-has-使用「-」检查给定数据项是否在数组中存在" class="header-anchor">#</a> 14、Arr::has() 使用「.」检查给定数据项是否在数组中存在</h3> <h4 id="代码分析-14"><a href="#代码分析-14" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
     * 使用「.」检查给定数据项是否在数组中存在
     *
     * @param  \ArrayAccess|array  $array
     * @param  string|array  $keys
     * @return bool
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">has</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$keys</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//若给定的键为null，则返回false</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean constant">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//强制转化为数组</span>
        <span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">)</span> <span class="token variable">$keys</span><span class="token punctuation">;</span>
    
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean constant">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//若为空数组，则返回false</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$keys</span> <span class="token operator">===</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean constant">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        <span class="token comment">//遍历数组</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$keys</span> <span class="token keyword">as</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$subKeyArray</span> <span class="token operator">=</span> <span class="token variable">$array</span><span class="token punctuation">;</span>
            <span class="token comment">//若当前元素存在，则跳出本次循环</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//以&quot;.&quot;符号分割为数组</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">explode</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'.'</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$segment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//若$subKeyArray为数组并当前元素存在，则赋值给$subKeyArray，则返回false</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accessible</span><span class="token punctuation">(</span><span class="token variable">$subKeyArray</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$subKeyArray</span><span class="token punctuation">,</span> <span class="token variable">$segment</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token variable">$subKeyArray</span> <span class="token operator">=</span> <span class="token variable">$subKeyArray</span><span class="token punctuation">[</span><span class="token variable">$segment</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token boolean constant">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">return</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre></div><h4 id="案例-14"><a href="#案例-14" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'product'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$contains</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'product.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>
    <span class="token variable">$contains</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'product.price'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'product.discount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>
</code></pre></div><h3 id="_15、arr-set-用于在嵌套数组中使用「-」号设置值"><a href="#_15、arr-set-用于在嵌套数组中使用「-」号设置值" class="header-anchor">#</a> 15、Arr::set() 用于在嵌套数组中使用「.」号设置值</h3> <h4 id="代码分析-15"><a href="#代码分析-15" class="header-anchor">#</a> 代码分析</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
      * 用于在嵌套数组中使用「.」号设置值
      *
      * @param  array   $array
      * @param  string  $key
      * @param  mixed   $value
      * @return array
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token comment">// 若给定的键为null，则返回给定的设置值</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">// 以&quot;.&quot;符号分割为数组</span>
         <span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'.'</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//循环$keys</span>
         <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">//删除数组中的第一个元素，并返回被删除元素的值</span>
             <span class="token variable">$key</span> <span class="token operator">=</span> <span class="token function">array_shift</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
         
             <span class="token comment">//若当前元素不存在或不是数组，则将$array[$key]赋值为空数组</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span> <span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
    
             <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">//删除数组中的第一个元素，并返回被删除元素的值</span>
         <span class="token comment">//删除掉被删除元素的值的元素</span>
         <span class="token variable">$array</span><span class="token punctuation">[</span><span class="token function">array_shift</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
    
         <span class="token keyword">return</span> <span class="token variable">$array</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

</code></pre></div><h4 id="案例-15"><a href="#案例-15" class="header-anchor">#</a> 案例</h4> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'products'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'desk'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'products.desk.price'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ['products' =&gt; ['desk' =&gt; ['price' =&gt; 200]]]</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/blog/collection.html" class="prev">
        Laravel 集合(Collection)源代码分析
      </a></span> <span class="next"><a href="/blog/blog/env.html">
        Laravel 环境变量(Env)加载源代码分析
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.6d7c03a7.js" defer></script><script src="/blog/assets/js/2.3312aabc.js" defer></script><script src="/blog/assets/js/6.f85c2328.js" defer></script>
  </body>
</html>
